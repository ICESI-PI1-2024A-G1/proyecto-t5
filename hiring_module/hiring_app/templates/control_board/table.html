{% extends 'base.html' %}

{% block title %}
Change state
{% endblock %}

{% block content %}    
    <table class="min-w-full divide-y divide-gray-200 mt-14 ml-0">
        <thead>
            <tr>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    ID
                </th>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    Solicitante
                </th>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    Lider encargado
                </th>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    Gestor encargado
                </th>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    Estado
                </th>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    Contrato
                </th>
                <th class="border border-black px-6 py-3 bg-[#2A8FD0] text-center text-xs leading-4 font-extrabold text-black uppercase tracking-wider">
                    Fecha incio
                </th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for solicitud in solicitudes %}
            <tr onclick="redirectToInfoPage('{{ solicitud.id }}')">
                <td class="border border-black px-6 py-4 text-center whitespace-no-wrap">
                    {{ solicitud.id }}
                </td>
                <td class="border border-black px-6 py-4 text-center whitespace-no-wrap">
                    {{ solicitud.created_by.first_name }} {{ solicitud.created_by.last_name }}
                </td>
                <td class="border border-black px-6 py-4 text-center whitespace-no-wrap">
                    {{ solicitud.leader_assigned_to.first_name }} {{ solicitud.leader_assigned_to.last_name }}
                </td>
                <td class="border border-black px-6 py-4 text-center whitespace-no-wrap">
                    {{ solicitud.manager_assigned_to.first_name }} {{ solicitud.manager_assigned_to.last_name }}
                </td>
                <td id="statusButton" class="border border-black px-6 py-4 text-center whitespace-no-wrap relative">
                    {{ solicitud.state }}
                </td>
                <td class="border border-black px-6 py-4 text-center whitespace-no-wrap">
                    {{ solicitud.contrato }}
                </td>
                <td class="border border-black px-6 py-4 text-center whitespace-no-wrap">
                    {{ solicitud.start_date }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    
    <script>
        function redirectToInfoPage(id) {
            // Construir la URL con el ID proporcionado
            var url = 'http://127.0.0.1:8000/hiring_app/info/' + id + '/';
            // Redireccionar a la URL
            window.location.href = url;
        }
    </script>

{% endblock %}
