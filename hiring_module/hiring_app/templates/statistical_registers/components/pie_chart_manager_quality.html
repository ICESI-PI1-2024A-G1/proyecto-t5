{% load static %}
<div class="col-xl-5 col-lg-5">
    <div class="card shadow mb-4">

        <div class="card-body">
            <div class="form-group">
                <label for="data_select">Seleccionar Datos:</label>
                <select class="form-control" id="data_select">
                    {% for item in data %}
                    <option value="{{ item }}">{{ item.0 }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="chart-pie pt-4 pb-2">
                <canvas id="manager_chart_pie"></canvas>
            </div>
            <div class="mt-4 text-center small" id="solicitudes_info">


                <span class="mr-2">
                    <i class="fas fa-circle text-success"></i> Solicitudes Aprobadas: <strong><span
                            id="solicitudes_aprobadas_manager">{{ data.0.1 }}</span></strong>
                </span>
                <br>
                <br>
                <span class="mr-2">
                    <i class="fas fa-circle text-warning"></i> Solicitudes En revisi√≥n: <strong><span
                            id="solicitudes_en_revision_manager">{{ data.0.2 }}</span></strong>
                </span>
                <br>
                <br>
                <span class="mr-2">
                    <i class="fas fa-circle text-danger"></i> Solicitudes por validar: <strong><span
                            id="solicitudes_por_validar_manager">{{ data.0.3 }}</span></strong>
                </span>
            </div>
        </div>


    </div>
</div>


<script src="{% static 'vendor/chart.js/Chart.min.js' %}"></script>
<script src="{% static 'js/statistics/manager_pie_chart.js' %}"></script>

<script>
    createOrUpdateChart();
</script>

<script>

    var dataSelect = document.getElementById('data_select');

    dataSelect.addEventListener('change', function () {
        var selectedValue = dataSelect.value.replace(/[\[\]']/g, '').split(',');
        
        document.getElementById('solicitudes_aprobadas_manager').innerText = selectedValue[1];
        document.getElementById('solicitudes_en_revision_manager').innerText = selectedValue[2];
        document.getElementById('solicitudes_por_validar_manager').innerText = selectedValue[3];

        createOrUpdateChart();
    });

</script>