<form id="ChangeLeaderForm" method="post" action="{% url 'hiring_app:assign_leader' contract_request.id %}">
    {% csrf_token %}
    
    <select name="leader" id="leaderSelect" class="btn btn-white border border-2 border-dark text-dark dropdown-toggle col"
    {% if not is_admin %}
    disabled
    {% endif %}

    >
        <option class="col" disabled selected>Seleccionar</option>
        {% for leader in leaders %}
        <option class="col" value="{{ leader.id }}" 
        {% if leader.id == contract_request.leader_assigned_to.id %}
        selected
        {% endif %}>
        {{ leader.first_name }} {{ leader.last_name }}
        </option>
        {% endfor %}
    </select>

</form>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var selectElement = document.getElementById('leaderSelect');
        selectElement.addEventListener('change', function () {
            document.getElementById('ChangeLeaderForm').submit();
        });
    });
</script>